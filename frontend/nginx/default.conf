# frontend/nginx/default.conf

# 서버 설정 시작
server {
  # 80번 포트에서 요청을 받음
  listen 80;

  # 루트 디렉토리를 /usr/share/nginx/html 로 지정 (React 빌드 파일이 복사되는 위치)
  root /usr/share/nginx/html;

  # 기본적으로 index.html 파일을 찾음
  index index.html;

  # 모든 요청(/)에 대한 처리 규칙
  location / {
    # 요청된 파일이나 디렉토리가 있는지 먼저 확인하고,
    # 없으면 모든 요청을 /index.html 로 전달하여 React Router가 처리하도록 함.
    # 이것이 SPA 라우팅의 핵심 설정입니다.
    try_files $uri $uri/ /index.html;
  }
}