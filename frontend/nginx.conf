server {
  listen 80;
  server_name _;

  # 1) 정적 자산: 게이트웨이보다 먼저 “파일로” 고정
  location ^~ /webtoon-hl/static/ {
    root /usr/share/nginx/html;
    access_log off;
    expires 1y;
  }
  location = /webtoon-hl/manifest.json { root /usr/share/nginx/html; access_log off; }
  location = /webtoon-hl/favicon.ico   { root /usr/share/nginx/html; access_log off; }

  # 2) SPA fallback: 파일 없으면 index.html
  location ^~ /webtoon-hl/ {
    root /usr/share/nginx/html;
    try_files $uri /webtoon-hl/index.html;
  }

  # (중요) 이 Nginx 컨테이너는 정적/SPA만. API는 게이트웨이에 별도 라우팅(리버스프록시)로 분리.
  # 여기서 /api/ 프록시는 두지 않음. (게이트웨이-컨테이너/서비스가 따로 처리)

  include /etc/nginx/mime.types;
  default_type application/octet-stream;
}
