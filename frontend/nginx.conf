server {
  listen 80;
  
  # /webtoon (slash 없음) -> /webtoon/ (slash 있음) 리다이렉트
  location = /webtoon {
    return 301 /webtoon/;
  }
  
  # /webtoon로 시작하는 요청 처리 (Gateway 설정과 일치)
  location /webtoon {
    alias /usr/share/nginx/html;
    index index.html index.htm;
    
    # 정적 파일들은 직접 서빙
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
      expires 1y;
      add_header Cache-Control "public, immutable";
      try_files $uri =404;
    }
    
    # HTML 파일들은 fallback 사용
    try_files $uri $uri/ /webtoon/index.html;
  }
  
  # 기본 루트 경로도 처리
  location / {
    root   /usr/share/nginx/html;
    index  index.html index.htm;
    try_files $uri $uri/ /index.html;
  }
}