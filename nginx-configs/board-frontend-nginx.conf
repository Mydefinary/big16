# board-frontend nginx 설정 (원본)
# 포트: 80
# 특징: 백엔드 프록시 설정 포함

server {
  listen 80;
  server_name _;

  root /usr/share/nginx/html;
  index index.html;

  # ✅ SPA 딥링크: 없는 경로는 index.html로 전달
  location / {
    try_files $uri $uri/ /index.html;
  }

  # ✅ 백엔드 프록시: 프론트에서 /api 호출을 서비스로 라우팅
  location /api/ {
    proxy_pass http://board-backend-service:8082;
    proxy_http_version 1.1;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
  }
}